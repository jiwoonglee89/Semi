<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="QNA_board">
	<insert id="add" parameterType="DB.QNABean">
		insert into QNA_board values(#{q_num},#{p_id}, #{co_id}, #{qna_title}, #{q_regdate},#{qref_number},
		#{readCount},#{cotent})
	</insert>
	<insert id="content_co_add" parameterType="DB.QNABean">
		insert into QNA_board values(#{co_id},#{qna_title}, #{cotent}, #{q_passwd})
	</insert>
	<insert id="content_p_add" parameterType="DB.QNABean">
		insert into QNA_board values(#{p_id},#{qna_title}, #{cotent}, #{q_passwd})
	</insert>
	<select id="get" parameterType="String" resultType="DB.Co_MemBean">
		select * from QNA_board where q_num=#{q_num}
	</select>
	<update id="p_modify" parameterType="DB.QNABean">
		update QNA_board set p_id=#{p_id}, q_title=#{q_title}, q_content=#{q_content},
		q_passwd=#{q_passwd} where q_num=#{q_num} 
	</update>
	
	<update id="co_modify" parameterType="DB.QNABean">
		update QNA_board set co_id=#{co_id}, q_title=#{q_title}, q_content=#{q_content},
		q_passwd=#{q_passwd} where q_num=#{q_num} 
	</update>
	
	<delete id="remove" parameterType="DB.QNABean">
		delete from QNA_board where q_num=#{q_num}
	</delete>
	<select id="list" resultType="DB.QNABean">
		select * from QNA_board 
	</select>
	<update id="readArticle" parameterType="String" >
		 update QNA_board set readCount=readCount+1 where q_num=#{q_num}
	</update>
	<select id="find_passwd" parameterType="String" resultType="String">
		select q_passwd from QNA_board where q_num=#{q_num}
	</select>
	<select id="find" parameterType="String" resultType="DB.QNABean">
		select * from QNA_board where co_id=#{co_id} and p_id=#{p_id}
	</select>
	<select id="get" parameterType="String" resultType="DB.QNABean">
		select * from QNA_board where co_id=#{co_id} and p_id=#{p_id}
	</select>
	
	<select id="getArticle" parameterType="DB.QNABean" resultType="java.lang.Integer">
		select count(*) from QNA_board
	</select>
	
	<select id="writer_article" parameterType="DB.QNABean" resultType="java.lang.Integer">
		select count(*) from QNA_board where writer like '%'|| #{writer} || '%'
	</select>
	<select id="subject_article" parameterType="DB.QNABean" resultType="java.lang.Integer">
		select count(*) from QNA_board where subject like '%'|| #{subject} || '%'
	</select>
	<select id="content_article" parameterType="DB.QNABean" resultType="java.lang.Integer">
		select count(*) from QNA_board where content like '%'|| #{content} || '%'
	</select>
</mapper>